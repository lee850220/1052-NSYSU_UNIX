                         UNIX系統編程
                        編程作業＃2
                        “你，我，我還沒有x”


截止日期：3月27日星期一上午9時。

提交方法：您將在課程網站上發布，就像上一個
                   分配。

提交規則：我要求您遵守這些規則：

                  1.提交一個名為“<你的學生證> .pa2.tar”的文件

                  2.截止日期後提交的文件將被忽略。
                     （這意味著，這項任務的提交不會遲。）
                     （順便說一句，如果你不轉讓你的作業，你
                      可能會失敗類。這是事實。所以開始
                      提早問問題。）
                  
                  這是一個大班。除非你們都遵循上面的規定
                  規則，工作的工作變得如此艱辛。所以我INSIST你
                  遵守上述規定。如果沒有，我們不會接受你的
                  家庭作業。

                  如果您對這些規則有任何疑問，您可以發布
                  問題到課程網站。


獲得幫助： - 教授的營業時間為周一的12：30-2：30，
                  並在星期五從10：00-12：00，在房間9037.他也可以
                  通過電子郵件到達。
                 -  TAT也可以回答您的問題。
                 - 關於作業的問題可以發佈到
                  討論論壇
                 - 你也可以和你討論作業的想法
                  同學們這樣的討論對你來說可以是非常有幫助的
                  學習 - 如果你只談論一般概念
作業的步驟。
 - 但是，如果您告訴其他學生具體細節
的實現，那麼你沒有幫助對方
學習;你正在為他們做工作。
                    換句話說，你是欺騙。你不能顯示另一個
學生任何答案的任務部分。

作弊政策：鼓勵學生組成學習小組。但這不是
                  平均分享代碼如果發現學生正在分享工作，
他們可以在整個課程中獲得0，甚至更糟。
                  這是欺騙讓另一個學生看到你的工作，或者
                  當你的代碼在上面時，讓他們看著你的肩膀
屏幕。
知道你被騙的好方法：如果你有代碼，
你的解決方案只是因為另一個學生告訴你放
它在那裡，但你實際上並不了解它。
如果您還不確定，可以向TA詢問更多信息
說明。
                  我們總是尋找作弊的證據，所以不要這樣做。
                  （無論如何，即使你沒有被抓住，那些誰
                  複製作業不會學習材料，所以他們
                  考試失敗）

最重要的編程分配是成績的很大一部分。
事情要知道：這個大點值意味著，如果你不這樣做，你
將失敗。
大點值也解釋了為什麼政策反對
作弊是嚴格執行的。



 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 
  -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

作業摘要：

,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
：第1部分作業概念：
“”“”“”“”“”“”“”“”“”“”“”“

在上一篇文章中，我提供了一個遊戲的概述。那個文件也是
包含在tarball中，您必須打開包裝才能打開當前
閱讀此README文件。但是在這個未打包的目錄中，我已經重命名了
文件為“READMEoverview”。要開始此作業，請閱讀該文件。


,,,,,,,,,,,,,,,,,,,,,,,,,
：第2部分提供的文件：
'''''''''''''''''''''''''''

如果您正在閱讀此文件，那麼您必須對該作業進行解壓縮。
查看untarred目錄，您將看到：
％ls
cave expectedDirectoryContents provided.tar READMEoverview READMEpa2

如果你已經閱讀了READMEoverview文件，那麼你知道什麼是“洞穴”文件
也是為了。

現在，對於expectedDirectoryContents文件，我通過輸入：
％cd
％rm -rf pa2
％tar -xvf rooms.tar
％找到pa2-name“*”> expectedDirectoryContents

請注意，在上面，rooms.tar文件是由你創建的。它會持有
在遊戲啟動時如何安排物品的複制。 （這是為什麼我們刪除任何
以前的目錄，可以對應於已經存在的遊戲
玩過，物體被移動。）
另請注意，講座2的幻燈片63-68討論了find命令。

有兩個原因為什麼我為你提供了expectedDirectoryContents文件：
所以你可以看到你應該把哪些對象放在哪裡。
所以你可以使用差異來比較你的答案與我的，並驗證你做了
   它正確

現在，關於提供的文件，它是一個改進的家庭作業1解決方案。
你看到：作業1很早，只有1個星期的上課。我們不知道
許多。我們甚至不知道tar命令。但是這個任務確實讓你
熟悉將在這個新作業中使用的一些事情（例如，
使用alias ）。話雖如此，我們真的不想創造
目錄通過使用alias ，因為創建目錄結構是
正是tar設計的。所以，這一次，我們會用tar。其實我已經
為你做了大量的工作，正如你將在下一段中看到的那樣...


,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, ,,,,,,,,,,,,,
：第3部分。解決方案的第一步：創建rooms.tar：
“”“”“”“”“”“”“”“”“”“”“”“”“”“”“ '''''''''

嘗試輸入：

％tar -xvf provided.tar> outinfo
％head outinfo
pa2 /
pa2 / items /
pa2 / items / .platinum
pa2 / items / .sleep
pa2 / items / ax
pa2 /物品/床
pa2 / items / boulder
pa2 / items / box
pa2 / items / bracelet
pa2 /物品/電纜
％

從上面我們看到我把所有的對象放在items文件夾中。
你只需要將它們移動到正確的目錄（對象除外）
像上面的手鐲，你開始已經攜帶了 - 這些你
離開物品目錄）。通過移動這些項目，您將獲得經驗
在mv命令中使用路徑（參見講座1的幻燈片＃57）。

我們再來看一下：
％head -39 outinfo> tempfile
％tail tempfile
pa2 /開始/
pa2 / start / 9
pa2 / start / contents
pa2 / start / e /
pa2 / start / e / 9
pa2 / start / e / contents
pa2 / start / e / n /
pa2 / start / e / n / 9
pa2 / start / e / n / contents
pa2 / start / e / n / d /

從上面我們看到我已經把房間的描述和
名為“9”的文件。所以你不必這樣做你要做的就是做
1）修復一些問題，並且2）添加一些符號鏈接。


解決了幾個問題？那麼，如果你看最後版本的幻燈片＃123
的講座2，命名為USP17_L2final.pptx，那麼你會找到一張圖片
遊戲中房間的目錄結構。現在看看那張照片。
我會等。 ...不，我在等去看那張幻燈片。

在那張幻燈片上，兩個矩形是紅色的。這兩個不是一部分
的作業1（因為我忘了他們）。不過，他們是遊戲的一部分。所以
我要你添加它們（我可以直接將它們添加到提供的tar中
文件，但我認為這將是一個很好的經驗。通過做
你會知道目錄可以像文件一樣移動。
當你創建這兩個新的房間，你必須給他們：適當的
子目錄，名為“9”的空文件和“內容”文件。為了救你
有一點努力，我暫時把這些內容放到items目錄下
（顯然，您需要重命名它們並將其移動到新的目錄）：
％head -14 outinfo> tempfile
％tail -4 tempfile
pa2 / items / computer
pa2 / items / contentsOfRoomNumber1.5
pa2 / items / contentsOfRoomNumber24.5
pa2 / items / diamond


添加一些符號鏈接？在READMEoverview中，您看到了遊戲如何使用符號
鏈接完成合併點。但我們也需要他們上樓梯 - 
如果這意味著去..（例如，房間6但不是房間24）。添加的原因
這個額外的規則是，這是唯一可能的單向運動
遊戲（即，你不能穿過一個洞，雖然你可以上樓梯）。

看幻燈片123，我們正是這些鏈接需要添加的地方。當你
添加這些鏈接使用絕對尋址。

完成這些操作後，可以使用前面所述的方法
這個文件，使用find和diff來比較你的答案與我提供的
expectedDirectoryContents文件。

然後把你的答案寫成“rooms.tar”（見講座2的幻燈片70）。


,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, ,,,,,,,,,,,,,,,,,,,,,,
：第4部分。您的其他解決方案：創建alias 文件，<您的ID> .pa2：
“”“”“”“”“”“”“”“”“”“”“”“”“”“”“ ''''''''''''''''''

第1行：第2講幻燈片29-30指出可以抑制輸出
        作為錯誤消息，通過將其發送到文件。幻燈片31繼續說明
UNIX提供/ dev / null作為特殊的地方扔掉垃圾。
我們在課堂上講了這個想法，但你應該運行修改後的講座
注意，因為我改進了我提出的想法。

無論如何，第1行的目的是創建一個到/ dev / null的符號鏈接。
我們想這樣做，因為我們的alias 將會發送這麼多東西
到/ dev / null，你會厭倦打字。所以更容易
在您的主目錄中創建了一個鏈接。調用鏈接X.然後你可以
通過鍵入“〜/ X”將事物發送到/ dev / null。

第1行不是alias 。它直接創建鏈接。但首先它
刪除〜/ X，使鏈接可以保證創建。注意：
〜/ X文件可能也可能不存在。你應該使用正確的
如果〜/ X不存在並且永遠不會要求，則使其不會抱怨
去除之前。

第1行使用：
rm（參見第1講幻燈片＃60）
ln（參見第2講幻燈片＃61）
; （參見第2講幻燈片＃85）

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   

第2行：alias nogo ='echo“你不能那樣走。”“

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   

第3行：alias l ='___ 1___; ___2___ ___3___'
        這個alias的目的是顯示房間的描述任何可獲得的對象。
		這個“l”命令與“look”不同命令（將在第4行定義）。
		區別在於“看”始終顯示整個“內容”文件，其中“l”可能顯示只有第一行（當你以前在房間裡）。

		
那麼它是如何工作的呢？它有3個不同的部分（用“;”分隔開）：



___1___：此部分顯示內容文件的相關部分。
什麼是“相關”部分？

如果你以前從來沒有進過房間，那麼一個名為的文件
此目錄中將存在“9”。相關部分，
這種情況，是整個文件。但是，由於沒有房間的“內容”
文件長度超過9行，我們可以重新表示前一個
句子：相關部分是前9行
文件。

然而，如果你以前進入了房間，那麼一個文件
命名為“1”將存在於此目錄中。相關部分，
在這種情況下，只是“內容”文件的第一行。

提示：您將需要使用-n標誌。真實的信件
n。有關此標誌的詳細信息，請參閱手冊頁。

___2___：此部分顯示可獲取的對象。全套的
可獲得的對像是：斧頭，手鐲，鑽石，磁盤，軟盤，
金，鑰匙，生活，紙張，保護器，鏟子和毛巾。

當看這個清單，你抗議一個對象像
手鐲不可以，因為你開始玩遊戲
它已經得到了。對象可以得到的原因是
這個賦值＃3將引入刪除對象的能力。
如果我們放棄它，那麼我們可以再次得到它，
所以你的對象顯示應該處理它。

例如，考慮以下幾點：
％ 遊戲
迷霧室
你在一個迷人，潮濕的房間雕刻成一座山。
北面是滑坡的遺跡。在東部，一個小的
通道通向黑暗。
這裡有：
一個金條
> cd e / e / n / d / d / sw / e /
>你
馬蹄巨石房
你在一個裸露的房間，除了一個馬蹄形的巨石
在中心。樓梯從這裡下來。
> ls -A
鉑金1塊巨石內容物馬蹄鐵
> mv〜/ pa2 / items / bracelet〜/ pa2 / items / paper〜/ pa2 / items / key。
> ls -A
鉑金1巨石手鐲內容馬蹄形鑰匙紙
> l
馬蹄巨石房
這裡有：
一個手鍊
黃銅鑰匙
一紙紙
挖
我想你發現了一些東西。
> l
馬蹄巨石房
這裡有：
一個手鍊
黃銅鑰匙
一紙紙
一個鉑金吧
>
注意，在上面，手鐲，鑰匙，紙和
當“l”命令輸入時，所有列表都將被清除。
但馬蹄形的巨石不顯示，因為它
不容易

現在，有一個提示顯示所有獲得能力的想法
對象需要注意的是有兩個可以獲得的對象
它們具有同義詞：軟盤/磁盤和生命/保存。

當您實現下一個任務中的刪除時，也可以刪除它
同義詞將會放棄兩者。換句話說：如果你的房間
包含“軟盤”文件，它一定也會包含
“磁盤”文件。

現在這個賦值沒有實現“drop”。但是
不能阻止我們手動移動文件（只要這樣
我們記得將對一起移動）。讓我們看看“l”是什麼
影響這樣做：
％ 遊戲
迷霧室
你在一個迷人，潮濕的房間雕刻成一座山。
北面是滑坡的遺跡。在東部，一個小的
通道通向黑暗。
這裡有：
一個金條
> l
迷霧室
這裡有：
一個金條
> mv ../items/floppy ../items/disk。
> mv ../items/life ../items/preserver。
> ls -A
1個內容磁盤e軟盤黃金壽命保護
> l
迷霧室
這裡有：
一張軟盤
一個金條
救生員
>

請注意，軟盤/磁盤只是一個項目，所以它只是
顯示一次。類似地，壽命/保存僅顯示一次。
這個解決方案就是說，即使兩個人的生活
而保存是可以得到的，其中之一（生命）將不會顯示。
而且，磁盤也不會顯示。

所以，修改後的可列表列表是：
斧頭，手鍊，鑽石，軟盤，金，鑰匙，
紙，防腐劑，鏟子和毛巾。

而且，順便說一下，所有不可顯示文件的列表是：
。白金，沙發，床，巨石，箱子，電纜，電腦，
驅動，馬蹄鐵，ibm，繪畫，PC，小便池，1，9，n，
s，e，w，u，d，ne，se，nw，sw和內容。

所以，我問你，你能找到一個匹配一切的模式
在第一個列表中沒有第二個列表？
提示：創建一個測試目錄並放入上述所有文件
進入該測試目錄。使用ls與你的通配符
模式。如果你的模式是正確的，你會看到
列出可顯示的文件。
提示：參見講座1的幻燈片32-34。
提示：看第三封信。

好。所以現在我們知道要顯示的對象。
問：但是如何正確顯示？我的意思是其中一個對象
是“金”，但它顯示（如上所示）
消息“這裡有”和描述“A金條”。
答：每當有消息“這裡有”需要打印
房間裡有一個可以得到的物體（而不是其他）。的
“金條”文字實際上是為您提供的
“金”文件的行（第一行之後的任何行
下一個分配中使用的對象的描述;
現在忽略它們）。我們來看看我的意思：
> l
迷霧室
這裡有：
一個金條
>貓金
一個金條
我沒有什麼特別的。
>

那麼，___2___成為什麼？首先觀察那裡
是有條件的行為：我們有時打印“這裡有”
我們有時候不會。您必須使用&&命令
協調（見講座2的幻燈片86-103）。

想法是：
如果當前有可獲取的文件
然後說“這裡有”
並顯示文件的第一行。

問：怎麼知道有getable文件？
A：嘗試列出它們。
Q2：我試圖列出它們，現在它顯示這個詞
“金”在屏幕上。
A2：嗯，我們不想看到。我們只是想
知道它是成功還是失敗（用於&&）。
參見講座2的幻燈片29-31。
Q3：好的，好的現在它不顯示“金”，但我
當我進入沒有的房間時，會收到一條錯誤消息
對象
A3：仔細閱讀Lecture 2的幻燈片29-31。
Q4：好的，好的。我現在打印“這裡有：”
正確的房間。但如何做到
顯示對象名稱有條件
在他們的存在（通過列出他們找到）？
A4：考慮一下&&的工作原理（見
講座2的幻燈片87-92）。認識到
這個echo命令將永遠是成功的。
Q5：好的，好的。但我仍然有一個問題
它打印額外的垃圾（“===> ... <===”）
除了第一行
可獲得文件。
A5：用人來尋找一個標誌來做出來
從不打印文件頭。

___3___：這將刪除“9”文件並創建“1”文件（除非
“9”已經被移動了（在這種情況下你不想要）
看到一條錯誤消息）。

        所以，讓我們回顧一下。我們被告知答案的形式是
alias l ='___ 1___; ___2___ ___3___'

現在，看看我的解決方案，我看到：
一個ls，一個迴聲，一個mv，兩個頭和兩個&& s


 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第4行：alias look ='___ 1___;我'

     這條線很簡單。我們已經有了“l”。唯一的問題是
“l”不總是顯示所有的“內容”文件 - 但是
“看”需要顯示全部。解決方案只是簡單的做法
“9”文件出現，然後運行“l”。換句話說，你欺騙“我”
認為這是你第一次進入房間。


 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第5行：alias n='basename `pwd -P` > ~/D; fgrep -_1_ s ~/D [2] cd .. [3] cd n && cd `pwd -P` [4] l [5] nogo'

        北移的基本思想是試圖執行“cd n”。如果是
成功，那意味著有一個名為“n”的子目錄（即，
北方有一個房間。）現在，n可能是一個鏈接（例如7號房間）
但是不會停止“cd n”的工作。

但有並發症：
1.北面可能沒有空間，所以我們需要一個錯誤信息。
2.北部可能有一個房間，但可能不是一個房間子目錄 - 它可能是PARENT目錄。這是困難的來處理。
3.當您按照鏈接時，目錄路徑將成為鏈接路徑。
我的意思是：“pwd”和“pwd -P”給出不同的答案。再次，
我的意思是：再次閱讀READMEoverview文件。它談論
這個問題。這是插入“cd`pwd -P`”的原因
alias ，如上圖所示。

_1_：這是一個標誌。它確保在〜/ D文件中找到“s”
實際上並不是“sw”或“se”。 （我們為什麼要找一個
“s”？為什麼不是“n”？答：因為這是一個關於我的問題
CURRENT目錄：如果我在我的父目錄以南，那麼我的
父目錄是我的NORTH。）
要了解fgrep及其旗幟，請參閱幻燈片81-83
講座2.（注意幻燈片81-83已經改進了
在課堂上提出）
[2]：這是指揮協調員之一。
[3]：這是指揮協調員之一。
[4]：這是指揮協調員之一。
[5]：這是指揮協調員之一。


 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

線6-13：這些線條類似於線5，但對於所有其他方向，
            除了“你”
        

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第14行：這行代表“u”。它與其他方向相似。但它是
     更簡單，因為它不檢查當前目錄
被命名為“d”。它不需要檢查的原因是
“上”是不對稱的一個方向：我們可以下去
一個洞，但不能恢復。
現在有樓梯，我們可以上去。但是像＃25這樣的房間可以，
因為up是一個子目錄，而不是父進程。至於像6號的房間，
這就是為什麼我們創建了一個“u”鏈接。看看講座2的幻燈片123，
如果你忘記了並回想起你如何設計目錄
對於room.tar，如本文檔前面所述。
        

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第15行：這行代表“i”。
         首先，它打印“你現在有：”
其次，它列出items目錄中的項目。模式就是這樣
                 就像一個使用第3行第__2__號空格的一部分。
        

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第16行：此行為“getall”。
     這裡的主要挑戰是給出正確的信息：
-M1：告訴用戶拾取物體。
-M2：告訴用戶有物體，但不能被拾起
-M3：告訴用戶沒有物件存在。

它的邏輯是：
1.將可獲取的對象移動到items目錄中
2.如果成功，打印M1。
3.否則，看看是否存在某些對象，如果是，打印M2
4.否則，打印M3。

在您的解決方案中，您將需要使用括號。見幻燈片105-112的講座2。
注意：這些添加的幻燈片不是在課堂上呈現。
        

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第17行：這行是為了“睡眠”。
         邏輯是嘗試打印.sleep文件，並打印“你無法睡眠“消息，如果失敗。
        

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第18行：這條線用於“挖”。
         邏輯是嘗試重命名.platinum文件，並打印
適當的信息 - “找到東西”或“沒有發現”。

現在有一個技術性 - 你需要鏟子。但
可以等待下一個作業。現在，我們沒有“掉落”
實施，所以你總是有鏟子。所以，現在，我們不會
麻煩測試它。
        

 -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   -   - 

第19行：alias game ='__ 1 __; cd pa2 / start; clear; look; PS1 =“>”'
         我給你的部分執行一些基本的操作
開始遊戲。其中兩個操作對你來說是新的（和那個
是為什麼我給你）：“清除”（它清除屏幕），和
“PS1 = ...”（改變提示）如果PS1不適合你，
你可能會使用不同的“shell”。如果是這樣，你可以問TA
那意味著什麼）。

對於__1__部分，它執行各種動作，全部分開
用分號目標是清除pa2目錄結構
（如果在那裡），並從你的房間打開一個新的結構
文件。這些都不應該有任何輸出。


,,,,,,,,,,,,,,,,,,,,,,,,,
：第5部分提交的內容：
'''''''''''''''''''''''''''
在這一點上，你已經創建了rooms.tar和<yourID>.pa2（當然，你的ID就像B104000001等）

現在：

1.創建一個名為<yourID>的目錄。 （當然，你的ID是這樣的
   B104000001等）

2.將rooms.tar和<yourID> .pa2複製到這個新目錄中。

3.轉到這個新目錄。

4.鍵入“echo”__1__'> mycodename“

   這裡，__1__是一個代碼名稱。

   問：為什麼是代碼名稱？
   A：所以我可以把網站上的成績發佈到網站上，而不要匿名。

   問：代碼名稱的規則是什麼？
   答：1.沒有什麼淫穢或冒犯
      2.一個合法的C變量的字符串（即所有的字母，
         數字和_s;沒有空格或標點符號）
      長5-9個字符
      不容易被認定為是你

cd ..
 
7.將這個新目錄作為<yourID> .pa2.tar

8. cd  - 

9. mv ../<yourID>.pa2.tar。

10.打包<yourID> .pa2.tar來驗證你沒有錯誤（每年，
   有人做...）你會知道它包裝正確，如果它解包使一個
   子目錄稱為<yourID>（當然，你的ID是這樣的
   B104000001等），如果該子目錄包含三個文件，以及
   如果這些文件與您打包的那些文件沒有任何差異。
   換一種說法：
   cd <yourID>; diff <yourID> .pa2 ..; diff rooms.tar ..;差異mycodename ..

11.在到期日前向網絡大學提交“<yourID> .pa2.tar”。